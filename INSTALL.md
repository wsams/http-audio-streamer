INSTALL
=======

Your mp3s or oggs should be stored in a web accessible directory - it does
not have to be inside this application. But this application and your music
archive must be on the same machine and in a web accessible directory. 
The application should have read access to your music archive. These directories
will be configured in [`lib/Auth.php`](lib/Auth.php).

Music location
--------------

I organize my music archive by directories. i.e. `/RootMusicDir/Genre/BandName/AlbumName/01.MusicFiles.mp3`

For example,

<pre>
/path/to/music/
              /Jazz/
                   /Grant Green/
                               /Alive/
                                     /01 Let The Music Take Your Mind.mp3
                                     /02 Time To Remember.mp3
              /Rock/
                   /The Doors/
                             /LA Woman/
                                      /01 - The Changeling.mp3
                                      /02 - Love Her Madly.mp3
</pre>

I can access my `music` directory via some URL. e.g. `http://www.example.com/music/`

And the streaming app from another URL. e.g. `http://www.example.com/streamer/`

When an album is played, the album title above the player is generated by looking at the path to the
file. If two slashes are in the file, it will take the last two directories of the path. Otherwise
just the last directory. For example, *The Doors > LA Woman*, would be printed.


Run the installer
-----------------
Open `https://www.example.com/streamer/installer.php` and follow the wizard. Each config parameter is
set page-by-page.

The following two configuration files are created: [`lib/Config.php`](lib/Config.php) and [`lib/Auth.php`](lib/Auth.php).


[`lib/Config.php`](lib/Config.php)
--------------------------------------------------

See [`lib/example.Config.php`](lib/example.Config.php) - your music will live in `$defaultMp3Dir`. This directory
should contain any level of sub-directories, but at least one more level deep. 
e.g. If `$defaultMp3Dir = '/var/www/mymusic'`, then put your music in `/var/www/mymusic/myalbum`. 
e.g. `/var/www/mymusic/Rock/TheDoors/L.A.Woman/*.mp3`

See [`scripts/README.md`](scripts/README.md) for information on cover art. Each album can have a cover
art image. The directory of music should contain two images,
`cover.jpg` and `small_cover.jpg`


[`lib/Auth.php`](lib/Auth.php)
----------------------------------------------
This is a very simple authentication mechanism. It contains an array of username and password combinations.

See [`scripts/README.md`](scripts/README.md) for information on setting up the search index.



Build indexes and album art
---------------------------
From the command line, go into `scripts` and run,

`php run.php`

It runs the suite of scripts that build the search index and general radio index as well as creating thumbnails and montages. Montages
are the thumbnails composed of album art in a grid.


JavaScript configuration: [`js/example.streams.config.js`](js/example.streams.config.js)
----------------------------------------------------------------
Copy [`js/example.streams.config.js`](js/example.streams.config.js) to [`js/streams.config.js`](js/streams.config.js) and edit 
if you wish - the intaller copies it for you with sane defaults.
